<!--
 * @Date: 2024-06-06
 * @LastEditors: GoKo-Son626
 * @LastEditTime: 2024-07-10
 * @FilePath: \STM32_Study\入门篇\6.Timer\Universal_timer.md
 * @Description: 通用定时器的学习和记录
-->

# 文件内容标题

> 内容目录：
> 
>       1.通用定时器



### 1. 通用定时器

> - **通用定时器：** TIM2/TIM3 /TIM4 /TIM5
> - **特性：**
>       16位**递增**、**递减**、**中心对齐计数器**（计数值：0~65535）
16位预分频器（分频系数：1~65536）
可用于触发**DAC,ADC**
在更新事件、**触发事件、输入捕获、输出比较**时，会产生中断/DMA请求
4个独立通道，可用于：**输入捕获、输出比较、输出PWM、单脉冲模式**
**使用外部信号控制定时器且可实现多个定时器互连的同步电路**
**支持编码器和霍尔传感器电路等**

###### 1. 通用定时器框图

![通用定时器框图](Pictures/通用定时器框图.png)

> **①时钟源**

![计数器时钟源框图](Pictures/计数器时钟源框图.png)

①内部时钟(CK_INT)，来自外设总线APB提供的时钟
②外部时钟模式1：外部输入引脚(TIx)，来自定时器通道1或者通道2引脚的信号
③外部时钟模式2：外部触发输入(ETR)，来自可以复用为TIMx_ETR的IO引脚
④内部触发输入(ITRx)，用于与芯片内部其它通用/高级定时器级联

**通用定时器时钟源设置方法**
| 定时器时钟类型                    | 设置方法                                                        |
| --------------------------------- | --------------------------------------------------------------- |
| 内部时钟(CK_INT)                  | 设置 TIMx_SMCR 的 SMS=0000                                      |
| 外部时钟模式 1：外部输入引脚(TIx) | 设置 TIMx_SMCR的 SMS=1111                                       |
| 外部时钟模式 2：外部触发输入(ETR) | 设置 TIMx_SMCR 的 ECE=1                                         |
| 内部触发输入(ITRx)                | 设置可参考《STM32F10xxx参考手册_V10（中文版）.pdf》14.3.15 小节 |

> **②控制器**


> **③时基单元**


> **④输入捕获**


> **⑤捕获/比较(公共)**


> **⑥输出比较**
